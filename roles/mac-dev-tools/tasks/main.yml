---
# Tasks for roles

- name: Ensure gems are installed
  gem:
    name: "{{ item }}"
    state: latest
  environment:
    GEM_HOME: ~/.gem
    GEM_PATH: ~/.gem
  with_items:
   - travis
   - rhc

- name: Ensure Node is installed with NPM
  homebrew:
    name: node
    state: latest
    install_options: with-npm

- name: Ensure Homebrew packages are installed
  homebrew:
    name: "{{ item }}"
    state: latest
  with_items:
   - ansible
   - git
   - golang
   - gom
   - gpg
   - hg
   - maven
   - yarn

- name: Ensure versions cask is installed
  homebrew_tap:
    name: caskroom/versions

- name: Ensure dev applications are installed
  homebrew_cask:
    name: "{{ item }}"
    state: present
  with_items:
   - atom
   - docker
   - eclipse-jee
   - firefoxnightly
   - google-chrome-canary
   - iterm2
   - java
   - postman
   - sourcetree
   - sublime-text
   - vagrant
   - virtualbox
   - visual-studio-code

- name: Ensure Javascript dev tools are globally installed
  npm:
    name: "{{ item }}"
    state: latest
    global: yes
  environment:
    PATH: "{{ ansible_env.PATH }}:/usr/local/bin/"
  with_items:
   - "@angular/cli"
   - bower
   - browser-sync
   - grunt-cli
   - gulp-cli
   - npm-check-updates
   - vue-cli
  tags: js

- name: Ensure Atom plugins are up to date
  include_role:
    name: jgkim.atom
  vars:
    atom_upgrade_all: true
    atom_packages:
     - atom-beautify
     - atom-jinja2
     - atom-typescript
     - busy-signal
     - cssbeautify
     - docker
     - file-icons
     - intentions
     - jade-beautify
     - language-ansible
     - language-awk
     - language-docker
     - language-hcl
     - language-ignore
     - language-ini
     - language-groovy
     - language-jade
     - language-javascript-jsx
     - language-markdown
     - language-pug
     - language-sass
     - language-toml
     - language-vue
     - linter
     - linter-docker
     - linter-eslint
     - linter-markdown
     - linter-sass-lint
     - linter-toml
     - linter-ui-default
     - minimap
     - minimap-find-and-replace
     - minimap-git-diff
     - minimap-pigments
